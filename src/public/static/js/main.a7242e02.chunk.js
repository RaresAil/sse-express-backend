(this["webpackJsonpsse-express-frontend"]=this["webpackJsonpsse-express-frontend"]||[]).push([[0],{230:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var s=n(79),a=n(48),r=n.n(a),i=n(121),c=n.n(i),o=(n(230),n(172)),u=n.n(o),d=n(213),l=n(174),p=n(214),f=n(215),v=n(224),h=n(222),j=n(175),b=n(223),y=(n(232),n(221));function O(e){return Object(s.jsx)(y.a,{licenseKey:"non-commercial-and-evaluation",data:e.data.map((function(e){var t=e.country,n=e.code,s=e.currency,a=e.level,r=e.units,i=e.total,c=e.quantity;return[t,n,s,a.toFixed(3),r,i,c]})),colHeaders:["Country","Code","Currency","Level","Units","Total","Quantity"],rowHeaders:!0,beforeChange:function(t,n){var s,a=Object(b.a)(t[0],4),r=a[0],i=a[1],c=a[2],o=a[3];if("edit"===n&&c!==o&&6===i){var u=null===(s=e.data[r])||void 0===s?void 0:s.id;u&&fetch("/api/v1/sse/quantity/".concat(u),{headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:parseInt(o)}),method:"PUT"})}},cells:function(e,t){var n={};return 6!==t&&(n=Object(j.a)(Object(j.a)({},n),{},{readOnly:!0})),n}})}var g=function(e){Object(v.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={nests:[],loading:!0,message:"Loading...",userId:""},e.updateNests=function(t){if(Array.isArray(t))e.setState({nests:t});else{var n=e.state.nests.findIndex((function(e){return e.id===t.id}));if(n>=0){var s=Object(l.a)(e.state.nests);s[n]=t,e.setState({nests:s})}else e.setState({nests:[].concat(Object(l.a)(e.state.nests),[t])})}},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,s=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/sse/me",{method:"GET"});case 2:return e.next=4,e.sent.json();case 4:if(t=e.sent,n=t.userId){e.next=8;break}return e.abrupt("return",this.setState({message:'Use "/api/v1/sse/login" to create a new session, the path paremter "id" is optional'}));case 8:new EventSource("/api/v1/sse/events").onmessage=function(e){s.updateNests(JSON.parse(e.data))},this.setState({loading:!1,userId:n});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?Object(s.jsx)("div",{children:this.state.message}):Object(s.jsxs)("div",{className:"app",children:[Object(s.jsxs)("div",{children:["User: ",this.state.userId]}),Object(s.jsx)(O,{data:this.state.nests})]})}}]),n}(a.Component),m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,269)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),s(e),a(e),r(e),i(e)}))};c.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(g,{})}),document.getElementById("root")),m()}},[[268,1,2]]]);
//# sourceMappingURL=main.a7242e02.chunk.js.map